<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap/dist/css/bootstrap.min.css">
    <style>body{box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;}</style>
</head>
<body style="padding-left: 20px; height:100vh;width:97%; margin: 10px 0 0 20px;; border-left: 1px solid grey;border-right: 1px solid grey;">
    <h1>Exercise 5</h1>
    <table class="table" >
        <thead>
        <tr>
            <th>ID</th><th>Year</th><th>Make</th><th>Model</th><th>Price</th>
        </tr>
        </thead>
        <tbody id="tbody"></tbody>
    </table>
        <label for="filter-price">Price:</label>
        <input type="number" id="filter-price">
        <button id="filter-price-button">Price less than</button>
        <button id="clear-filter-button">Clear Filter</button>
    <br>
    <br>
    <a href="/"><button>Back</button></a>
    <h1>Reflections</h1>
    <div style="border-radius: 5px 5px 5px 5px; width:80%; border: 1px solid gray; height:auto;">
    <ul>
        <li>The javascript template string is created for each car object in the list. This list is then placed into the innerHTML of the tablebody.</li>
        <li>Map method was used to create this new array. </li>
        <li>Filter was used to create a new car list, filtered for the price. </li>
        <li>After filtering the car objects, i reuse the makeList() method and return it to the table body to update the list.</li>
    </ul>

    </div>

    <script>
    
    const cars = [
        { id: 1, year: 1997, make: 'Ford', model: 'E350', price: 3000 },
        { id: 2, year: 1999, make: 'Chevy', model: 'Venture', price: 4900 },
        { id: 3, year: 2000, make: 'Chevy', model: 'Venture', price: 5000 },
        { id: 4, year: 1996, make: 'Jeep', model: 'Grand Cherokee', price: 4799 },
        { id: 5, year: 2005, make: 'Volvo', model: 'V70', price: 44799 }
      ];
    const carTable = makeList(cars);
    document.querySelector("#tbody").innerHTML = carTable;
    function makeList(array) {
        const lis = array.map(car => `<tr><td>${car.id}</td><td>${car.year}</td><td>${car.make}</td><td>${car.model}</td><td>${car.price}</td></tr>`).join("");
        return lis;
    }

    document.querySelector("#filter-price-button").onclick = (evt) => {
        evt.preventDefault();
        const filterPrice = document.querySelector("#filter-price").value;
        const filteredCars = cars.filter(car => car.price < filterPrice);
        const filteredCarTable = makeList(filteredCars);
        document.querySelector("#tbody").innerHTML = filteredCarTable;
    }

    document.querySelector("#clear-filter-button").onclick = () => {
        const filterPrice = document.querySelector("#filter-price");
        filterPrice.value = "";
        const carTable = makeList(cars);
        document.querySelector("#tbody").innerHTML = carTable;
    }

      </script>
</body>
</html>